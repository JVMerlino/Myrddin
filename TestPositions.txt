// test positions -- just copy and paste in the command window -- solve < 3m with PVs for 3 consecutive depths, and hold past 5s
// for avoid move positions, must hold past 30s
// 0.85 64-bit results first
setboard 8/k7/3p4/p2P1p2/P2P1P2/8/8/K7 w - - 0 1 bm Kb1 (0.2s at d19)
setboard 7k/3b3p/1p6/3p1P1P/2p3r1/2P1R3/7r/2RK4 b - - 0 40 bm Rg1, Ba4 -- announce Mate in 7 (0.04s)
setboard r4r2/p1q1n1kp/2n1ppp1/8/3P2N1/3BPP2/2Q2P1P/R3K2R w KQ - 0 19  bm h3, h4 (0.7s)
setboard 2q3k1/R2bprbp/3n2p1/3P4/P2NP3/5P2/1r3BPP/3Q1RK1 b - - 0 21 bm Nxe4 (0.7s)
setboard R7/5k2/3p4/4p3/1P3p1R/8/2P4K/8 w - - 0 45 bm Rh6 -- announce Mate in 5 (0.8s)
setboard 3q2k1/Q1p1bpp1/2P1p3/P2pPr2/3P4/2P1PN2/1r6/R4RK1 w - - 0 46  bm Rfb1 (0.8s)
setboard 4rrk1/1pq2ppp/p1bb2n1/2p5/P1B1P3/2B2N2/1P2QPPP/R2R2K1 w - - 0 18  bm Bd3, e5, Qd3 (1.0s)
setboard 4r1k1/2r1pp1p/pp4p1/3b4/PB1b2N1/8/5PPP/3RR1K1 b - - 0 25 bm Bg7 (1.3s)
setboard 1r5k/q1p3p1/3b1p1p/8/p1P4N/3Q1PP1/2P3K1/7R b - - 0 30 am a3 (2.8s)
setboard 4r1k1/pp1b1pp1/1q1b1p2/3P4/2Q2PP1/P1N5/RP2N3/7K b - - 0 22 bm Qf2 (2.9s)
setboard r1bqr1k1/p2p1pp1/1p5p/2pP3Q/1n2p3/1P2P1P1/PB1P1PP1/R3KB1R w KQ - bm Bg7 (3.0s)
setboard 6k1/8/5pB1/4b2p/3rP2P/2K1R1P1/1r2R3/8 b - - 0 57 bm Rd7, Rd8 -- announce Mate in 5 (3.7s)
setboard 3b2k1/3Prp1p/R5p1/p7/2Bp4/1P3P2/P5PP/6K1 w - - 0 40 bm Bb5 (3.8s)
setboard 1k2r3/p2BPb1p/5P2/2p2P2/Pp6/5P2/1P1B3P/n3K3 w - - 0 32 bm Be6, Bf4 (4.4s)
setboard 6k1/4bpp1/R7/2p1P3/6qP/1P4B1/7P/1R4K1 b - - 0 36 bm c4 (5.3s)
setboard 3rrk2/1bnqppb1/p2p2p1/1p1P2P1/1p2PP1R/2NQBN2/1PP2K2/7R w - - bm Rh8 -- Mate in 16 (5.4s) 0.54s 1.07s 0.82s
setboard rr4k1/2Q2pbp/6p1/3P4/pp2P3/q3B1N1/4BPPP/1R4K1 b - - 0 25 bm Qc3, b3 (6.0s)
setboard 8/8/4kp1p/R7/4N2P/p4rP1/6K1/3b4 w - - 0 52 bm Nf2 (8.4s)
setboard r4rk1/1p2ppbp/pq1p2p1/3P4/1nP3n1/2N2N2/PP2QPPP/R1B2RK1 b - - 0 18  bm a5 (9.5s)
setboard 8/pR5p/4k3/2P1B3/5P1r/4P3/P2r4/2R3K1 w - - 0 34  bm Rb2, Rg7 (12s)
setboard 3r1r1k/1bq1bp1p/pn5B/1ppPPR2/P1p1B3/2P3P1/7P/R2Q2K1 w - - bm Qh5 (19s)
setboard 3r1r2/pb3pkp/1pn2Np1/2p1PP2/8/b2BQ3/qP4PP/3R1R1K w - - 0 1 bm Ng4
setboard rn2r1k1/p2n3p/bp2N1pQ/2pP4/2PbP3/P1N4P/1P2B3/R6K w - - 0 31  bm Rf1 (69s)
setboard 3R4/2r5/6rp/2k5/p1p2p1P/P1Rp1P2/1P6/5K2 b - - bm Rcg7 -- announce Mate in 10 (FAIL) 4.1s 3.3s 2.05s
setboard 8/3kp3/Q7/4p3/4K3/6p1/PP4P1/8 b - - 0 43 bm Ke8 (FAIL)
setboard 8/2p4p/5k2/p2P4/P1K2bP1/5B2/7p/8 b - - 0 40 bm Ke5, Bd2 (FAIL)
setboard 2r1r1k1/5p2/p3pbpB/1p1pP3/3p2P1/n1q2B2/2P2PK1/4R2R w - - bm exf6 with positive score (FAIL) 36s 18s 25s
setboard 3r1r1k/1b4pp/ppn1p3/4Pp1R/Pn5P/3P4/4QP2/1qB1NKR1 w - - bm Rxh7 with positive score (FAIL) 5.7s 7.1s 2.2s
setboard 5r2/pb3p1k/1pn3p1/2p1PP2/8/b2RQ3/qP4PP/5R1K w - - bm Qh3 -- Mate in 9 (FAIL) 5.9s 5.6s 5.9s
setboard r4rk1/pp4pp/n1p3p1/4p1Pn/2P5/q2P3P/P2NPPB1/R2QK2R w KQ - 0 16 bm Qb3 (FAIL)
setboard 3rk2r/pq1npp1p/Q5p1/1N6/3R1p2/7P/PPP3P1/2KR4 b k - 0 22 bm Qb8 (FAIL)
setboard 6k1/7p/p2p2p1/Pp2q3/1Pp3P1/2P1Q3/5K2/8 b - - 0 65 bm Qxe3
setboard 6K1/8/pp5p/8/7k/3PP3/8/8 w - - 0 1 bm d4 (pawn-square rule) 6.2s 64s 62s
setboard 2br2k1/p1q3p1/1r2p2p/1p2Npb1/5N2/P2PQ1R1/1P3PPP/4R1K1 w - - 0 27 bm Rxg5 24s 19s 13s
setboard 6rk/5r1p/Q2p4/P2Pbpq1/NP3p1n/R1P1pP2/6PP/3B2RK b - - 0 30 bm Rf6 -- Mate in 10 2.3s 4.2s 2.1s
setboard r5n1/p2q3k/4b2p/3pB3/2PP1QpP/8/PP4P1/5RK1 w - - 1 bm h5
setboard 8/8/8/4b1k1/8/5P2/Pp5p/1K5R w - - 0 43 bm a4 -- announce mate
setboard 1k6/4R3/1p6/p1p3p1/qnBn2Qp/5P2/1P6/1K6 w - - 0 46 bm Bb3 -- announce draw
setboard 8/5k2/1b1q4/1P4QP/8/5PP1/6K1/8 w - - 0 1 bm Qg6 Myrddin v TJ
setboard r3kb1r/1b3pp1/2Np1q1p/p1nB4/P3P3/R2p4/1PP2PPP/3QR1K1 w kq - 0 18 bm Rxd3
setboard 8/3Pb1p1/8/3P2P1/5P2/7k/4K3/8 w - - 0 1 bm Kd3
setboard 4KBkr/7p/6PP/4P3/8/3P1p2/8/8 w - - bm g7 needs null move verification?
setboard rn1qkb1r/1b3p1p/p2pp1p1/8/Np1NnP2/1B2B3/PPP3PP/R2Q1RK1 w kq - 0 12 bm f5
setboard 1r4r1/3q1npk/2b1pbnp/Rp1p4/1N1P3P/2PQ1pP1/1K3B2/5B1R w - - 0 1 bm Qg6
setboard rn2k2r/pp1b1ppp/4pn2/8/3RP3/2B2N2/1PQK1PPP/q4B1R b kq - 0 12 am b5 (bm 0-0? Na6? Nc6?)
setboard rnbqr2k/pppp1Qpp/8/b2NN3/2B1n3/8/PPPP1PPP/R1B1K2R w KQ - bm Qg8+ WAC.263
setboard 1nbq1r1k/3rbp1p/p1p1pp1Q/1p6/P1pPN3/5NP1/1P2PPBP/R4RK1 w - - bm Nfg5 WAC.293

New
setboard r3qrk1/p2bnppp/1pnQp3/3pP1B1/2P5/P4N2/2P2PPP/R3KB1R w KQ - 0 2 am Bd3
setboard r1q1n1k1/3b3r/1p1p1b2/1NpPp3/P1P1Pp1p/2BN1PpP/R3K1P1/Q5R1 b - - 0 1 bm Bxh3
setboard 2r1r2k/4PQ1P/p7/Pb4R1/8/5PP1/1b4K1/8 w - - 0 66 bm f4
setboard 8/5k1p/3b3K/5p2/1P2n3/P6P/8/4R3 w - - 8 60 am Kxh7
setboard rn3rk1/3n4/1p2pqp1/p2p2Np/3p1P2/2PQN3/PP4PP/4RRK1 w - - 0 19 bm Nxe6
setboard 6k1/5p1p/P1pb1nq1/6p1/3P4/1BP2PP1/1P1Nb2P/R1B3K1 b - - 0 25 bm Qd3

From Jon Dart's "easy" set
setboard rn1qr1k1/1p2np2/2p3p1/8/1pPb4/7Q/PB1P1PP1/2KR1B1R w - - bm Qh8; c0 "Winning Chess by Chernev & Reinfeld, 259A, after BxN"; 
setboard 1Q1nb3/p3k1pp/5p2/1B1p4/PK5P/4P3/5PP1/2r5 b - - bm Nc6; c0 "Winning Chess by Chernev & Reinfeld, 208A (slightly modified)"; 
setboard 6rr/pp2kpRb/4p2p/4P3/3N1P2/4K3/P1P4P/6R1 w - - bm Rxh7; c0 "Winning Chess by Chernev & Reinfeld, 150A"; 
setboard r4bk1/pp1b1pp1/n4p1p/qN1p4/3P1N2/2PBrP2/PP4PP/1K1R1Q1R b - - bm Rxd3; c0 "Lakdawala-Christiansen, San Mateo 1989"; 
setboard 2q1k1n1/2p1ppbr/r1npb1pp/3N4/3PP3/P2QBN1P/2P2PP1/RR4K1 w - - bm Qxa6; 
setboard 2kr4/K1pp4/1p6/8/8/8/7Q/3R4 w - - bm Qd6; c0 "problem by Max Euwe, 1927 - Chess Life, July 1989, p. 24"; 
setboard r1b3k1/1p3ppp/p1n5/2Q1p3/8/1NP5/P1P1BPqP/1K1R4 w - - bm Qxc6; 
setboard 4rnk1/pp3ppp/q1prp3/8/2P1Q1NP/2B5/PP3PP1/4R1K1 w - - bm Qe5; c0 "Winning Chess by Chernev & Reinfeld, 80B"; 
setboard r4rk1/1b3ppp/ppq2b2/2p1p2N/3p1PQ1/1P1BP3/P1PP2PP/R4RK1 w - - bm Be4; c0 "Winning Chess by Chernev & Reinfeld, 155A"; 
setboard 2kr2r1/1pp2ppp/p1pq1nb1/4p3/4PP2/2NPB2P/PPP1Q1P1/R4RK1 w - - bm f5; c0 "Winning Chess by Chernev & Reinfeld, 195B, modified slightly"; 
setboard r2q1rk1/pp2nppp/4n3/8/3PP3/P3Q1B1/4N1PP/R4RK1 w - - bm d5; c0 "Winning Chess by Chernev & Reinfeld, 99A"; 
setboard 7b/2R2Prk/6qp/3B2pn/8/5PP1/5P2/6K1 w - - bm f8=N; "test for underpromotion"; 
setboard 7n/Q2K1k1p/6pB/3N2P1/8/8/8/4r3 b - - bm Re7; c0 "test for stalemate"; 
setboard r1br1k2/1p4pp/pn1Np3/2qpPp2/3N1P1P/2PQ3R/PP4P1/R3K3 w - - bm Nxb7; c0 "Winning Chess by Chernev & Reinfeld, 152A"; 
setboard 4r3/ppn3k1/3p1Rpn/1PpPr1p1/P1P3P1/7P/3N4/3N1RK1 b - - bm Nf5; 
setboard 3r2k1/5ppp/pb2p3/1p2P3/1P2bPP1/P1B5/6P1/R4R1K b - - bm Rd3; "Winning Chess by Chernev & Reinfeld, 100A"; 
setboard r5k1/ppp1brpp/2p2q2/2P5/3P1B2/5QP1/PP3P1P/R4R1K b - - bm g5; c0 "Winning Chess by Chernev & Reinfeld, 35A, slightly modified"; 
setboard r4k2/p3nppp/3q4/2Np1b2/1r1P3P/5QP1/P4PB1/2R1R1K1 w - - bm Rxe7; c0 "Bent Larsen: Bent Larsen's good move guide, Oxford University Press 1982, Ch. 1 #1"; 
setboard r5rk/p1qnbp1p/1p2p2Q/3pP2p/P1pPb3/2P2N1P/1P2BPP1/RNR3K1 b - - bm Bxf3; 
setboard 1r3r2/p3q1bk/5npp/2p5/2B1PpP1/1R3P2/PB5P/1QR3K1 w - - bm Bxf6; c0 "Taimanov-Vasiukov, World Senior Chmp 1994"; 
setboard 4kb1r/1bBnpppp/p7/1p1q/3P3n/5P/PPQ1B2P/2R2KNR w - - bm Bg3; c0 "Winning Chess by Chernev & Reinfeld, 238A"; 

Questionable
setboard 3rkb1r/1p2npp1/p1q5/4P3/3BP1p1/2PB1N2/PP3PP1/R2Q1RK1 w k - 0 18  bm g3, Ng5, Re1, e6 (35s) 33s g3 43s e6
setboard r3k1r1/1b3p1p/p2bpp2/2p5/P2p3P/3Q1P1R/1PPP2P1/R1BqNK2 b q - 0 18 bm Rxg2, Rg3 (FAIL) e5?
setboard 6k1/r4pp1/2p1p2p/qp5P/r2P4/2Q1RPP1/PP6/1K2R3 b - - 0 bm b4 (FAIL) Qd8?
setboard 6k1/6pp/pp6/2p1Qp1q/2Pp1P2/1P1P2P1/P4P2/6K1 b - - 0 30 bm Qd1 -- draw (FAIL) h6?
setboard 5rk1/ppb3p1/3qp3/4n3/2PpP2P/P2P3Q/2P2rB1/RN1K3R b - - 0 1 bm Nxc4?

3-rep draw test
setboard 3r3N/R1p1kppp/n6n/8/2QPP3/5q2/5P1P/5RK1 w - - 0 24 am Qxa6

pawn structure test
setboard 2r1k2r/7p/1p4p1/3pPp2/3P1P1P/P5P1/1P4K1/4R3 w k - 0 1  for testing pawn structure
setboard r1r1k3/7p/1p4p1/1p1pPp2/1p1P1P1P/P2P2P1/1P4K1/4R3 w q - 0 1  for testing pawn structure
setboard 8/p7/3Pb3/1pB1pkPP/2p4R/2P5/2P2K2/2r5 b - - 0 1 for testing pawn structure

SEE test
setboard 1k1r3q/1ppn3p/p4b2/4p3/8/P2N2P1/1PP1R1BP/2K1Q3 w - Nxe5 is a losing capture

TB test
setboard 4k3/8/8/8/8/8/4P3/4K3 w - - bm Kd2, Kf2
setboard 4k3/8/8/8/8/8/6P1/3K4 w - - bm Ke2
setboard R7/P4k2/8/8/8/8/r7/6K1 w - - bm Rh8
setboard 8/8/3Q1rk1/4R3/2q5/6P1/8/7K w - - bm Qd2
setboard 4k1r1/4p3/8/8/8/8/3B4/4K3 b - - bm Rg2 -- Mate in 24
setboard 2k5/8/3K4/1p6/p7/P7/1B6/8 w - - bm Bf6 -- Mate in 20
setboard 8/4R3/8/3k4/5p2/8/r7/3K4 w - - 0 9 bm Re8, Rc7, Rb7, Ke1, Re2
setboard 3k4/2r3q1/8/8/8/8/2Q1R1R1/4K3 w - - 0 1 bm Qd1 -- announce Mate in 6 (5.3s)
setboard 8/3k4/8/8/P1P5/1PK5/r7/2B5 w - - 6 48 am Bb2
setboard 8/8/8/2k5/P1P5/1P6/rBK5/8 w - - 0 48 bm Kc3
setboard 8/8/8/7k/2p5/2P2K2/1P6/8 w - - 0 53 bm Ke3, Ke4 (ep test)
setboard 8/1p6/2p5/2P4k/8/5K2/8/8 b - - 0 1 bm Kg5 (ep test)

No TB test
setboard 8/8/8/8/8/2kb1r2/8/4K1R1 w - - 0 101 bm Rh1
setboard 4k3/8/8/8/8/8/4P3/4K3 w - - 0 bm Kd2, Kf2
setboard 4k3/4p3/8/8/8/8/8/4K3 b - - 0 bm Kd7, Kf7
setboard 8/8/8/8/4n3/K1P5/P1P5/Bk6 w - - 0 1 bm Bb2
setboard 8/8/8/6b1/8/6p1/4k1P1/7K w - - 0 5 reduce to draw score
setboard 4k3/8/8/8/8/8/8/6KQ w - - 0 1 bm Qh7, Qb7 Mate in 7

Static eval test
setboard 8/1p3p2/p3pk2/5p2/8/5P1P/2N3P1/5b1K w - - 0 47 at least -2.5

Crash test
setboard 5Kbk/6pp/6P1/8/8/8/8/7R w - -
setboard k1b5/1p1p1p1p/pPpPpPpP/P1P1P1P1/8/8/8/K1B5 w - - 0 1

Movegen test
setboard r3k2r/8/8/8/3pPp2/8/8/R3K1RR b KQkq e3 0 1 // perft(6) = 485,647,607 63.13
setboard r3k2r/Pppp1ppp/1b3nbN/nP6/BBP1P3/q4N2/Pp1P2PP/R2Q1RK1 w kq - 0 1 // perft(6) = 706,045,033
setboard 8/7p/p5pb/4k3/P1pPn3/8/P5PP/1rB2RK1 b - d3 0 28 // perft 6 = 38,633,283
setboard 8/3K4/2p5/p2b2r1/5k2/8/8/1q6 b - - 1 67 // perft 7 = 493,407,574
setboard rnbqkb1r/ppppp1pp/7n/4Pp2/8/8/PPPP1PPP/RNBQKBNR w KQkq f6 0 3 // perft 6 = 244,063,299

Ron's perft positions
setboard r3k2r/p1ppqpb1/bn2pnp1/3PN3/1p2P3/2N2Q1p/PPPBBPPP/R3K2R w KQkq - // Perft(5) == 193,690,690 14.68
setboard 8/p7/8/1P6/K1k3p1/6P1/7P/8 w - - // Perft(8) == 8,103,790 0.87
setboard n1n5/PPPk4/8/8/8/8/4Kppp/5N1N b - - // Perft(6) == 71,179,139 7.12
setboard r3k2r/p6p/8/B7/1pp1p3/3b4/P6P/R3K2R w KQkq - // Perft(6) == 77,054,993 6.39
setboard 8/2p5/3p4/KP5r/1R3p1k/8/4P1P1/8 w - - // Perft(7) == 178,633,661 15.94
setboard 8/5p2/8/2k3P1/p3K3/8/1P6/8 b - - // Perft(8) == 64,451,405 6.21
setboard r3k2r/pb3p2/5npp/n2p4/1p1PPB2/6P1/P2N1PBP/R3K2R w KQkq - // Perft(5) == 29,179,893 2.17
Original Bitboard version = 65.4s
Optimized movegen (don't flag checking moves) = 53.38
0x88 version = 204.5s

Wild 20 test
setboard r1b2rk1/pp1qpn1p/1n1P2p1/8/4N3/1B3Q2/PP3PPP/R1B1R1K1 w Qq - 0 1

Symmetrical eval positions -- NO LONGER APPLICABLE AFTER ASYMMETRICAL PST!
setboard r3rk2/ppp1q1pp/2n5/5bN1/2B1pP2/Q7/PPP4P/1KR3R1 w - - bm Nxh7+; 
setboard 2kr3r/pp1q1ppp/5n2/1Nb5/2Pp1B2/7Q/P4PPP/1R3RK1 w - - bm Nxa7+; 
setboard 1r3rk1/p4ppp/7q/2pP1b2/1nB5/5N2/PP1Q1PPP/2KR3R b - - bm Nxa2+; 
setboard 1kr3r1/ppp4p/q7/2b1Pp2/5Bn1/2N5/PPP1Q1PP/R3RK2 b - - bm Nxh2+; 

STUFF TO DO
when to do IID
instant research on fail low at root
don't flag checking moves (tried and failed twice, maybe try again?)
reduce size of PV structure

Tuning!
initial best
K = 1.2991
E = 98594

Tapered Eval = +29
1st tune = no ks pawn shield 
           king_attacker 1
	   no pawn eval = 97263.6 +31
2nd tune = above 
	   bishop pair 16/35 
	   MG rook open file 34 (no EG) 
	   doubled pawn 14/23 
	   blocked doubled 6/2
	   isolated pawn 10/0 
	   f3/no pawn shield 8/15 = 96511.1 +26
3rd tune = above
           N mobility min-moves/mg/eg 1/2/2
	   B mobility min-moves/mg/eg 4/3/2
           R mobility min-moves/mg/eg 6/3/2
	   Q mobility min-moves/mg/eg 5/0/7
	   mg passers for 4th/5th/6th rank 7/17/0 
	   eg passers for 4th/5th/6th rank 11/23/24
           protected passers 7/16
           connected passers 0/8 
	   removed rooks behind passers
	   removed king can't catch passer
           queen adj 21/21
	   rook adj -8/18 
           bishop adj 2/0
           knight adj 9/5 
           pawn adj 1/0 = 95549.46 +23

Second pass
K = 1.3952
E = 95428.5
king attacker 1 (no change)
bishop pair 23/50 = 95388.19
MG rook open file 29 = 95381.23
doubled pawn 8/19 = 95343.47
blocked doubled 2/2 = 95340.17
isolated 11/4 = 95318.07
protected passers 5/11 = 95314.44
connected passers 0/4 = 95313.48
f3/no pawn shield 8/16 = 95312.70
queen adj 37/23 = 95310.41
rook adj 1/15 = 95306.27
bishop adj 2/0 (no change)
knight adj 17/1 = 95285.43
pawn adj -1/-2 = 95278.27
mg passers for 4th/5th/6th rank 7/17/0 (no change)
eg passers for 4th/5th/6th rank 17/31/21 = 95213.96
N mobility min-moves/mg/eg 1/1/2 = 95191.04
B mobility min-moves/mg/eg 4/3/3 = 95186.44
R mobility min-moves/mg/eg 6/3/2 (no change)
Q mobility min-moves/mg/eg 4/0/6 = 95182.23 +17

Third pass
Added more positions
K = 1.3757
E = 176558.26